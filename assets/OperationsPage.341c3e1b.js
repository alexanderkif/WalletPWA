import{Q as H}from"./QPage.9c3c964a.js";import{a as m}from"./QBtn.31f061f9.js";import{Q as N,a as O,C as w,b as G,c as y}from"./QTr.0d0d4458.js";import{c as J,Q as b,e as Y}from"./QTable.9cacc603.js";import{a as h,Q as V}from"./QCard.cbbd4b89.js";import{B as D,r as i,c as j,a0 as R,_ as P,n as _,C as k,L as B,F as o,E as l,K as U,al as A,v as $,H as f,I as C,D as z,J as S}from"./index.208a8043.js";import{u as M}from"./categories-store.32e2bc73.js";import{u as F}from"./operations-store.bdbffeb5.js";import{P as T}from"./LocalStorage.8b0fb558.js";import"./QSpinner.cc6bb998.js";import"./use-file-dom-props.f8999825.js";import"./use-dark.e57ad9c3.js";import"./selection.63f14626.js";import"./format.3e32b8d9.js";const W=D({name:"OperationAddingComponent",setup(){const a=F(),t=M(),s=i(),u=i(),p=i(!1),d=i(""),e=i(""),r=i(""),g=i(),Q=j(()=>[...t.getCategories,"Add category"]),v=i(!1);R(async()=>{var n,c;r.value==="Add category"&&(v.value=!0,await _(),(c=(n=u.value)==null?void 0:n.$el)==null||c.focus(),r.value="")});async function K(){var n,c;d.value="",p.value=!0,await _(),(c=(n=s.value)==null?void 0:n.$el)==null||c.focus()}function q(){var n;d.value.length<3||(a.addOperation({label:d.value,category:r.value}),d.value="",(n=s.value)==null||n.resetValidation(),p.value=!1)}function L(){var n;e.value.length<3||(t.addCategory(e.value),r.value=e.value,e.value="",(n=u.value)==null||n.resetValidation(),v.value=!1)}return{openAddOperationDialog:K,addDialogOpened:p,saveOperation:q,operationName:d,inputOperationNameRef:s,category:r,categories:g,filterFn:function(n,c){if(n===""){c(()=>{g.value=Q.value});return}c(()=>{const E=n.toLowerCase();g.value=Q.value.filter(I=>I.toLowerCase().indexOf(E)>-1)})},categoryName:e,addCategoryDialogOpened:v,inputCategoryRef:u,saveCategory:L}}}),X={class:"q-px-md full-width"},Z={class:"row full-width"};function x(a,t,s,u,p,d){return k(),B("div",X,[o(m,{color:"positive",icon:"add",glossy:"",label:"Add Operation",onClick:a.openAddOperationDialog},null,8,["onClick"]),o(b,{modelValue:a.addDialogOpened,"onUpdate:modelValue":t[2]||(t[2]=e=>a.addDialogOpened=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[o(h,null,{default:l(()=>[o(V,{class:"row items-center",style:{width:"250px"}},{default:l(()=>[U("div",Z,[o(N,{ref:"inputOperationNameRef",outlined:"",modelValue:a.operationName,"onUpdate:modelValue":t[0]||(t[0]=e=>a.operationName=e),label:"Operation name",class:"col",rules:[e=>e.length>2||"Please use minimum 3 characters"],onKeyup:A(a.saveOperation,["enter"])},null,8,["modelValue","rules","onKeyup"])]),o(J,{outlined:"",class:"q-mt-sm full-width",modelValue:a.category,"onUpdate:modelValue":t[1]||(t[1]=e=>a.category=e),options:a.categories,label:"Category","use-input":"","input-debounce":"0",onFilter:a.filterFn,style:{width:"250px"}},null,8,["modelValue","options","onFilter"])]),_:1}),o(O,{align:"right"},{default:l(()=>[$(o(m,{flat:"",label:"Cancel",color:"primary"},null,512),[[w]]),o(m,{flat:"",label:"Save Operation",color:"primary",onClick:a.saveOperation},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(b,{modelValue:a.addCategoryDialogOpened,"onUpdate:modelValue":t[4]||(t[4]=e=>a.addCategoryDialogOpened=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[o(h,null,{default:l(()=>[o(V,{class:"row items-center",style:{width:"250px"}},{default:l(()=>[o(N,{ref:"inputCategoryRef",outlined:"",modelValue:a.categoryName,"onUpdate:modelValue":t[3]||(t[3]=e=>a.categoryName=e),label:"Gategory name",class:"col",rules:[e=>e.length>2||"Please use minimum 3 characters"],onKeyup:A(a.saveCategory,["enter"])},null,8,["modelValue","rules","onKeyup"])]),_:1}),o(O,{align:"right"},{default:l(()=>[$(o(m,{flat:"",label:"Cancel",color:"primary"},null,512),[[w]]),o(m,{flat:"",label:"Save gategory",color:"primary",onClick:a.saveCategory},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var ee=P(W,[["render",x]]);const ae=[{name:"label",required:!0,label:"Label",align:"left",field:a=>a.label,sortable:!0},{name:"category",label:"Category",align:"left",field:a=>a.category},{name:"delete",label:"Delete",align:"center",field:"delete"}],oe=D({name:"OperationsTableComponent",setup(){const a=i(!1),t=i(),s=F(),u=()=>{s.storageOperations()},p=r=>{t.value=r,a.value=!0},d=()=>{t.value&&s.removeOperation(t.value),a.value=!1},e=i({sortBy:"date",descending:!0,page:1,rowsPerPage:T.getItem("operationsRowsPerPage")||5});return R(()=>{var r;T.set("operationsRowsPerPage",(r=e.value)==null?void 0:r.rowsPerPage)}),{confirmDeleteDialogOpened:a,operationsStore:s,columns:ae,changedHide:u,operationToRemove:t,deleteOperation:p,deleteOperationConfirmed:d,initialPagination:e}}}),te={class:"q-pa-md full-width"},le=f(" Do you really want to delete Operation "),ne=U("br",null,null,-1);function re(a,t,s,u,p,d){return k(),B("div",te,[o(Y,{title:"Operations",rows:a.operationsStore.getOperations,columns:a.columns,"row-key":"value",pagination:a.initialPagination,"onUpdate:pagination":t[0]||(t[0]=e=>a.initialPagination=e),"no-data-label":"No Operations found"},{body:l(e=>[o(G,{props:e},{default:l(()=>[o(y,{key:"label",props:e},{default:l(()=>[f(C(e.row.label),1)]),_:2},1032,["props"]),o(y,{key:"category",props:e},{default:l(()=>[f(C(e.row.category),1)]),_:2},1032,["props"]),o(y,{key:"delete",props:e},{default:l(()=>[o(m,{flat:"",round:"",color:"negative",icon:"delete",onClick:r=>a.deleteOperation(e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"]),o(b,{modelValue:a.confirmDeleteDialogOpened,"onUpdate:modelValue":t[1]||(t[1]=e=>a.confirmDeleteDialogOpened=e),"transition-show":"scale","transition-hide":"scale"},{default:l(()=>[o(h,{class:"bg-negative text-white"},{default:l(()=>[o(V,{class:"row text-center text-h6"},{default:l(()=>{var e;return[le,ne,f('"'+C((e=a.operationToRemove)==null?void 0:e.label)+'"? ',1)]}),_:1}),o(O,{align:"right",class:"bg-white"},{default:l(()=>[$(o(m,{flat:"",label:"No",color:"secondary"},null,512),[[w]]),o(m,{flat:"",label:"Yes",color:"negative",onClick:a.deleteOperationConfirmed},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var ie=P(oe,[["render",re]]);const se=D({name:"OperationsPage",components:{OperationAddingComponent:ee,OperationsTableComponent:ie},setup(){return{}}});function de(a,t,s,u,p,d){const e=S("OperationAddingComponent"),r=S("OperationsTableComponent");return k(),z(H,{class:"col full-width"},{default:l(()=>[o(e,{class:"q-mt-md"}),o(r)]),_:1})}var De=P(se,[["render",de]]);export{De as default};
