import{Q as H}from"./QPage.c7a5a26c.js";import{a as p}from"./QBtn.127b6c83.js";import{f as N,g as I,h as O,Q as h,C as w,i as j,j as f,k as G}from"./QTable.0decf943.js";import{P as S,Q as b,a as V}from"./LocalStorage.b464d0c0.js";import{af as J,B as k,r,c as Y,ai as z,_ as D,n as A,C as Q,L as U,F as o,E as l,K as q,ah as T,v as $,H as m,I as v,D as M,J as P}from"./index.6d79cc00.js";import{u as B}from"./operations-store.462e1bce.js";import"./render.dd44443f.js";import"./use-dark.832e374b.js";import"./QItem.8c4d5bdd.js";const W=J("categories-store",{state:()=>({categories:S.getItem("categories")||[]}),getters:{getCategories:e=>e.categories},actions:{storageCategories(){S.set("categories",this.categories)},setCategories(e){this.categories=e,this.storageCategories()},addCategory(e){this.categories.push(e),this.storageCategories()},removeCategorie(e){this.categories=this.categories.filter(t=>t!==e),this.storageCategories()}}}),X=k({name:"OperationAddingComponent",setup(){const e=B(),t=W(),i=r(),c=r(),g=r(!1),s=r(""),a=r(""),d=r(""),C=r(),_=Y(()=>[...t.getCategories,"Add category"]),y=r(!1);z(async()=>{var n,u;d.value==="Add category"&&(console.log("category.value",d.value),y.value=!0,await A(),(u=(n=c.value)==null?void 0:n.$el)==null||u.focus(),d.value="")});async function F(){var n,u;s.value="",g.value=!0,await A(),(u=(n=i.value)==null?void 0:n.$el)==null||u.focus()}function K(){var n;s.value.length<3||(e.addOperation(s.value,d.value),s.value="",(n=i.value)==null||n.resetValidation(),g.value=!1)}function R(){var n;a.value.length<3||(t.addCategory(a.value),d.value=a.value,a.value="",(n=c.value)==null||n.resetValidation(),y.value=!1)}return{openAddOperationDialog:F,addDialogOpened:g,saveOperation:K,operationName:s,inputOperationNameRef:i,category:d,categories:C,filterFn:function(n,u){if(n===""){u(()=>{C.value=_.value});return}u(()=>{const L=n.toLowerCase();C.value=_.value.filter(E=>E.toLowerCase().indexOf(L)>-1)})},categoryName:a,addCategoryDialogOpened:y,inputCategoryRef:c,saveCategory:R}}}),Z={class:"q-px-md full-width"},x={class:"row full-width"};function ee(e,t,i,c,g,s){return Q(),U("div",Z,[o(p,{color:"positive",icon:"add",glossy:"",label:"Add Operation",onClick:e.openAddOperationDialog},null,8,["onClick"]),o(h,{modelValue:e.addDialogOpened,"onUpdate:modelValue":t[2]||(t[2]=a=>e.addDialogOpened=a),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[o(b,null,{default:l(()=>[o(V,{class:"row items-center",style:{width:"250px"}},{default:l(()=>[q("div",x,[o(N,{ref:"inputOperationNameRef",outlined:"",modelValue:e.operationName,"onUpdate:modelValue":t[0]||(t[0]=a=>e.operationName=a),label:"Operation name",class:"col",rules:[a=>a.length>2||"Please use minimum 3 characters"],onKeyup:T(e.saveOperation,["enter"])},null,8,["modelValue","rules","onKeyup"])]),o(I,{outlined:"",class:"q-mt-sm full-width",modelValue:e.category,"onUpdate:modelValue":t[1]||(t[1]=a=>e.category=a),options:e.categories,label:"Category","use-input":"","input-debounce":"0",onFilter:e.filterFn,style:{width:"250px"}},null,8,["modelValue","options","onFilter"])]),_:1}),o(O,{align:"right"},{default:l(()=>[$(o(p,{flat:"",label:"Cancel",color:"primary"},null,512),[[w]]),o(p,{flat:"",label:"Save Operation",color:"primary",onClick:e.saveOperation},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(h,{modelValue:e.addCategoryDialogOpened,"onUpdate:modelValue":t[4]||(t[4]=a=>e.addCategoryDialogOpened=a),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[o(b,null,{default:l(()=>[o(V,{class:"row items-center",style:{width:"250px"}},{default:l(()=>[o(N,{ref:"inputCategoryRef",outlined:"",modelValue:e.categoryName,"onUpdate:modelValue":t[3]||(t[3]=a=>e.categoryName=a),label:"Gategory name",class:"col",rules:[a=>a.length>2||"Please use minimum 3 characters"],onKeyup:T(e.saveCategory,["enter"])},null,8,["modelValue","rules","onKeyup"])]),_:1}),o(O,{align:"right"},{default:l(()=>[$(o(p,{flat:"",label:"Cancel",color:"primary"},null,512),[[w]]),o(p,{flat:"",label:"Save gategory",color:"primary",onClick:e.saveCategory},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var ae=D(X,[["render",ee]]);const oe=[{name:"value",required:!0,label:"Value",align:"left",field:e=>e.value},{name:"label",required:!0,label:"Label",align:"left",field:e=>e.label,sortable:!0},{name:"category",label:"Category",align:"left",field:e=>e.category},{name:"delete",label:"Delete",align:"center",field:"delete"}],te=k({name:"OperationsTableComponent",setup(){const e=r(!1),t=r(),i=B();return{confirmDeleteDialogOpened:e,operationsStore:i,columns:oe,changedHide:()=>{i.storageOperations()},operationToRemove:t,deleteOperation:a=>{t.value=a,e.value=!0},deleteOperationConfirmed:()=>{t.value&&i.removeOperation(t.value),e.value=!1},pagination:r({rowsPerPage:0})}}}),le={class:"q-pa-md full-width"},ne=m(" Do you really want to delete Operation "),re=q("br",null,null,-1);function ie(e,t,i,c,g,s){return Q(),U("div",le,[o(G,{title:"Operations",rows:e.operationsStore.getOperations,columns:e.columns,"row-key":"value","virtual-scroll":"",pagination:e.pagination,"onUpdate:pagination":t[0]||(t[0]=a=>e.pagination=a),"rows-per-page-options":[0],"no-data-label":"No Operations found"},{body:l(a=>[o(j,{props:a},{default:l(()=>[o(f,{key:"value",props:a},{default:l(()=>[m(v(a.row.value),1)]),_:2},1032,["props"]),o(f,{key:"label",props:a},{default:l(()=>[m(v(a.row.label),1)]),_:2},1032,["props"]),o(f,{key:"category",props:a},{default:l(()=>[m(v(a.row.category),1)]),_:2},1032,["props"]),o(f,{key:"delete",props:a},{default:l(()=>[o(p,{flat:"",round:"",color:"negative",icon:"delete",onClick:d=>e.deleteOperation(a.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"]),o(h,{modelValue:e.confirmDeleteDialogOpened,"onUpdate:modelValue":t[1]||(t[1]=a=>e.confirmDeleteDialogOpened=a),"transition-show":"scale","transition-hide":"scale"},{default:l(()=>[o(b,{class:"bg-negative text-white"},{default:l(()=>[o(V,{class:"row text-center text-h6"},{default:l(()=>{var a;return[ne,re,m('"'+v((a=e.operationToRemove)==null?void 0:a.label)+'"? ',1)]}),_:1}),o(O,{align:"right",class:"bg-white"},{default:l(()=>[$(o(p,{flat:"",label:"No",color:"secondary"},null,512),[[w]]),o(p,{flat:"",label:"Yes",color:"negative",onClick:e.deleteOperationConfirmed},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var se=D(te,[["render",ie]]);const de=k({name:"OperationsPage",components:{OperationAddingComponent:ae,OperationsTableComponent:se},setup(){return{}}});function ue(e,t,i,c,g,s){const a=P("OperationAddingComponent"),d=P("OperationsTableComponent");return Q(),M(H,{class:"col full-width"},{default:l(()=>[o(a,{class:"q-mt-md"}),o(d)]),_:1})}var we=D(de,[["render",ue]]);export{we as default};
