import{Q as H}from"./QPage.b7a38356.js";import{a as c}from"./QBtn.739062f7.js";import{f as N,g as j,h as w,Q as h,C as b,i as G,j as f,k as J}from"./QTable.c531257c.js";import{P as C,a as V,Q as k}from"./LocalStorage.37a85e63.js";import{a0 as Y,B as D,r as i,c as Z,Z as R,_ as P,n as S,C as Q,L as B,F as o,E as l,K as U,ak as A,v as $,H as m,I as v,D as z,J as T}from"./index.baa7913a.js";import{u as q}from"./operations-store.30ce1b17.js";import"./render.657ca976.js";import"./use-dark.fedd9e49.js";import"./format.b8bc2196.js";const M=Y("categories-store",{state:()=>({categories:C.getItem("categories")||[]}),getters:{getCategories:e=>e.categories},actions:{storageCategories(){C.set("categories",this.categories)},setCategories(e){this.categories=e,this.storageCategories()},addCategory(e){this.categories.push(e),this.storageCategories()},removeCategorie(e){this.categories=this.categories.filter(t=>t!==e),this.storageCategories()}}}),W=D({name:"OperationAddingComponent",setup(){const e=q(),t=M(),s=i(),u=i(),p=i(!1),d=i(""),a=i(""),r=i(""),y=i(),_=Z(()=>[...t.getCategories,"Add category"]),O=i(!1);R(async()=>{var n,g;r.value==="Add category"&&(O.value=!0,await S(),(g=(n=u.value)==null?void 0:n.$el)==null||g.focus(),r.value="")});async function F(){var n,g;d.value="",p.value=!0,await S(),(g=(n=s.value)==null?void 0:n.$el)==null||g.focus()}function K(){var n;d.value.length<3||(e.addOperation(d.value,r.value),d.value="",(n=s.value)==null||n.resetValidation(),p.value=!1)}function I(){var n;a.value.length<3||(t.addCategory(a.value),r.value=a.value,a.value="",(n=u.value)==null||n.resetValidation(),O.value=!1)}return{openAddOperationDialog:F,addDialogOpened:p,saveOperation:K,operationName:d,inputOperationNameRef:s,category:r,categories:y,filterFn:function(n,g){if(n===""){g(()=>{y.value=_.value});return}g(()=>{const L=n.toLowerCase();y.value=_.value.filter(E=>E.toLowerCase().indexOf(L)>-1)})},categoryName:a,addCategoryDialogOpened:O,inputCategoryRef:u,saveCategory:I}}}),X={class:"q-px-md full-width"},x={class:"row full-width"};function ee(e,t,s,u,p,d){return Q(),B("div",X,[o(c,{color:"positive",icon:"add",glossy:"",label:"Add Operation",onClick:e.openAddOperationDialog},null,8,["onClick"]),o(h,{modelValue:e.addDialogOpened,"onUpdate:modelValue":t[2]||(t[2]=a=>e.addDialogOpened=a),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[o(V,null,{default:l(()=>[o(k,{class:"row items-center",style:{width:"250px"}},{default:l(()=>[U("div",x,[o(N,{ref:"inputOperationNameRef",outlined:"",modelValue:e.operationName,"onUpdate:modelValue":t[0]||(t[0]=a=>e.operationName=a),label:"Operation name",class:"col",rules:[a=>a.length>2||"Please use minimum 3 characters"],onKeyup:A(e.saveOperation,["enter"])},null,8,["modelValue","rules","onKeyup"])]),o(j,{outlined:"",class:"q-mt-sm full-width",modelValue:e.category,"onUpdate:modelValue":t[1]||(t[1]=a=>e.category=a),options:e.categories,label:"Category","use-input":"","input-debounce":"0",onFilter:e.filterFn,style:{width:"250px"}},null,8,["modelValue","options","onFilter"])]),_:1}),o(w,{align:"right"},{default:l(()=>[$(o(c,{flat:"",label:"Cancel",color:"primary"},null,512),[[b]]),o(c,{flat:"",label:"Save Operation",color:"primary",onClick:e.saveOperation},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(h,{modelValue:e.addCategoryDialogOpened,"onUpdate:modelValue":t[4]||(t[4]=a=>e.addCategoryDialogOpened=a),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[o(V,null,{default:l(()=>[o(k,{class:"row items-center",style:{width:"250px"}},{default:l(()=>[o(N,{ref:"inputCategoryRef",outlined:"",modelValue:e.categoryName,"onUpdate:modelValue":t[3]||(t[3]=a=>e.categoryName=a),label:"Gategory name",class:"col",rules:[a=>a.length>2||"Please use minimum 3 characters"],onKeyup:A(e.saveCategory,["enter"])},null,8,["modelValue","rules","onKeyup"])]),_:1}),o(w,{align:"right"},{default:l(()=>[$(o(c,{flat:"",label:"Cancel",color:"primary"},null,512),[[b]]),o(c,{flat:"",label:"Save gategory",color:"primary",onClick:e.saveCategory},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var ae=P(W,[["render",ee]]);const oe=[{name:"value",required:!0,label:"Value",align:"left",field:e=>e.value},{name:"label",required:!0,label:"Label",align:"left",field:e=>e.label,sortable:!0},{name:"category",label:"Category",align:"left",field:e=>e.category},{name:"delete",label:"Delete",align:"center",field:"delete"}],te=D({name:"OperationsTableComponent",setup(){const e=i(!1),t=i(),s=q(),u=()=>{s.storageOperations()},p=r=>{t.value=r,e.value=!0},d=()=>{t.value&&s.removeOperation(t.value),e.value=!1},a=i({sortBy:"date",descending:!0,page:1,rowsPerPage:C.getItem("operationsRowsPerPage")||5});return R(()=>{var r;C.set("operationsRowsPerPage",(r=a.value)==null?void 0:r.rowsPerPage)}),{confirmDeleteDialogOpened:e,operationsStore:s,columns:oe,changedHide:u,operationToRemove:t,deleteOperation:p,deleteOperationConfirmed:d,initialPagination:a}}}),le={class:"q-pa-md full-width"},ne=m(" Do you really want to delete Operation "),re=U("br",null,null,-1);function ie(e,t,s,u,p,d){return Q(),B("div",le,[o(J,{title:"Operations",rows:e.operationsStore.getOperations,columns:e.columns,"row-key":"value",pagination:e.initialPagination,"onUpdate:pagination":t[0]||(t[0]=a=>e.initialPagination=a),"no-data-label":"No Operations found"},{body:l(a=>[o(G,{props:a},{default:l(()=>[o(f,{key:"value",props:a},{default:l(()=>[m(v(a.row.value),1)]),_:2},1032,["props"]),o(f,{key:"label",props:a},{default:l(()=>[m(v(a.row.label),1)]),_:2},1032,["props"]),o(f,{key:"category",props:a},{default:l(()=>[m(v(a.row.category),1)]),_:2},1032,["props"]),o(f,{key:"delete",props:a},{default:l(()=>[o(c,{flat:"",round:"",color:"negative",icon:"delete",onClick:r=>e.deleteOperation(a.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"]),o(h,{modelValue:e.confirmDeleteDialogOpened,"onUpdate:modelValue":t[1]||(t[1]=a=>e.confirmDeleteDialogOpened=a),"transition-show":"scale","transition-hide":"scale"},{default:l(()=>[o(V,{class:"bg-negative text-white"},{default:l(()=>[o(k,{class:"row text-center text-h6"},{default:l(()=>{var a;return[ne,re,m('"'+v((a=e.operationToRemove)==null?void 0:a.label)+'"? ',1)]}),_:1}),o(w,{align:"right",class:"bg-white"},{default:l(()=>[$(o(c,{flat:"",label:"No",color:"secondary"},null,512),[[b]]),o(c,{flat:"",label:"Yes",color:"negative",onClick:e.deleteOperationConfirmed},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var se=P(te,[["render",ie]]);const de=D({name:"OperationsPage",components:{OperationAddingComponent:ae,OperationsTableComponent:se},setup(){return{}}});function ue(e,t,s,u,p,d){const a=T("OperationAddingComponent"),r=T("OperationsTableComponent");return Q(),z(H,{class:"col full-width"},{default:l(()=>[o(a,{class:"q-mt-md"}),o(r)]),_:1})}var he=P(de,[["render",ue]]);export{he as default};
